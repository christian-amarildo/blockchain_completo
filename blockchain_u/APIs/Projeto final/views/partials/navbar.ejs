<nav class="navbar fixed-top navbar-expand-lg navbar-light bg-light">
  <div class="container-fluid">
    <a class="navbar-brand" href="/">
      <img
        class="carbon21-logo"
        src="/images/logo_poli.png"
        alt="Carbon21 Logo"
      />
      USP Tokens
    </a>
    <button
      class="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarNavDropdown"
      aria-controls="navbarNavDropdown"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavDropdown">
      <ul class="navbar-nav ms-auto">
        <% if(title==="Home" && !currentUser){ %>
        <li class="nav-item">
          <a class="nav-link" aria-current="page" href="#top">Início</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#features">Funcionalidades</a>
        </li>
        <% } %> <% if (currentUser) { %>
        <li class="nav-item">
          <a class="nav-link" href="/collection">Comprar Gabaritos</a>
        </li>
        <li class="nav-item dropdown">
          <a
            class="nav-link dropdown-toggle"
            href="#"
            id="navbarDropdownMenuLink"
            role="button"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            Minha Conta
          </a>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
            <li><a class="dropdown-item" href="/selfBalance">Saldo</a></li>
            <li><a class="dropdown-item" href="/transfer">Transferência</a></li>
            <li>
              <a class="dropdown-item" href="/selfCollection">Meus Gabaritos</a>
            </li>
          </ul>
        </li>
        <li class="nav-item dropdown" id="adminDropdown">
          <a
            class="nav-link dropdown-toggle"
            href="#"
            id="navbarDropdownMenuLink"
            role="button"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            Área Administrativa
          </a>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
            <li><a class="dropdown-item" href="/mint">Emissão</a></li>
            <li>
              <a class="dropdown-item" href="/balance">Consulta de saldos</a>
            </li>
            <!-- <li>
              <a class="dropdown-item" href="/collection"
                >Consulta de coleções</a
              >
            </li> -->
          </ul>
        </li>
        <% } %> <% if (!currentUser) { %>
        <li class="nav-item">
          <a class="nav-link" href="/register"
            ><button type="button" class="btn btn-outline-success btn-sm">
              Entrar
            </button></a
          >
        </li>
        <% } %> <% if (currentUser) { %>
        <li class="nav-item">
          <a class="nav-link" href="/logout"
            ><button class="btn btn-outline-success btn-sm">Sair</button></a
          >
        </li>
        <% } %>
      </ul>
    </div>
  </div>
  <div id="flash" class="flash"><%- include("../partials/flash") %></div>
</nav>

<!-- Display admin functionalities if user is admin
<script>
  // //get role from jwt
  // const role = JSON.parse(atob(localStorage.token.split(".")[1])).role;
  // console.log("ROLE",role);

  // //TODO isso deveria ser feito usando ejs!
  // //show admin functionalities
  // if (role === "admin") {
  //   if (typeof adminDropdown !== "undefined") adminDropdown.hidden = false;
  // }
</script>-->
